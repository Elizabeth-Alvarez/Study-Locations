<div ng-controller = "discussionsController">
  <div class="container">
    <div class="row header">
      <div class="col-md-6">
        <ul class="pagination">
          <li><a href="#/partial1">Log Out</a></li>
          <li><a href="#/partial3">Locations</a></li>
        </ul>
      </div>
    </div>

    <!-- <h2>Welcome<p ng-bind="person"></p></h2> -->
    <h3 ng-bind="location.name">{{location[0].name}}</h3>
    <div class="form-group">
      <label class="control-label col-sm-2" for="Add">Discussion:</label>
      <div class="col-sm-10">
        <input name = "discussion" ng-model='new_discussion.discussion ' type="text"  class="form-control" id="add">
      </div>
    </div>
    <div class="Discussion">
      <input type="submit" value="Submit" ng-click='addDiscussion(new_discussion)' class="btn btn-success">
    </div>

    <div ng-repeat = "discussion in discussions" ng-if = "discussion.shop_id == location[0]._id">
      <!-- discussions start looping here -->
      <p >Discussion: {{discussion.user}}: {{discussion.discussion}}</p>

      <p>{{discussion.upvote}} <button class="btn btn-info" ng-click = "addUpvote(discussion._id)">Upvote</button>
      {{discussion.downvote}} <button class="btn btn-danger" ng-click = "addDownvote(discussion._id)">Downvote</button> </p>
      <p><input ng-click='removeDiscussion(discussion)' class="btn btn-warning" type="submit" value="Remove"></p>

      <!-- Comments start looping here -->
      <div ng-repeat = "comment in comments" ng-if = "comment.discussion_id == discussion._id">
        <p>Comment: {{comment.user}}: {{comment.comment}}</p>
        <p>{{comment.upvote}} <button class="btn btn-info" ng-click = "addUpvotes(comment._id)">Upvote</button>
        {{comment.downvote}} <button class="btn btn-danger" ng-click = "addDownvotes(comment._id)">Downvote</button></p>
          <p><input ng-click='removeComment(comment)' class="btn btn-warning" type="submit" value="Remove"></p>
      </div>

      <label class="control-label col-sm-2" for="Add">Comment:</label>
      <div class="col-sm-10">
        <input name = "comment" ng-model='new_comment.comment ' type="text"  class="form-control" id="add">
      </div>

      <div class="addComments">
        <input type="submit" value="Submit" ng-click='addComment(new_comment,discussion._id)' class="btn btn-success">
      </div>
    </div>  <!-- End of discussion with comments loop -->

  </div>
</div>
